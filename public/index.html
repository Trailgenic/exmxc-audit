<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>EEI Internal Audit ‚Äî exmxc.ai</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      --bg: #070b14;
      --panel: #0d1424;
      --border: #1f2a44;
      --text: #e6ebf5;
      --muted: #9aa4bf;

      --green: #11c37a;
      --yellow: #f2a900;
      --red: #e5395f;
      --blue: #4f7cff;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background: radial-gradient(circle at top, #0b1224, var(--bg));
      color: var(--text);
    }

    .container {
      max-width: 1200px;
      margin: 40px auto;
      padding: 0 20px;
    }

    h1 {
      font-size: 22px;
      margin-bottom: 16px;
      font-weight: 600;
    }

    /* INPUT */
    .input-row {
      display: flex;
      gap: 12px;
      margin-bottom: 28px;
    }

    input {
      flex: 1;
      padding: 14px 16px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: var(--panel);
      color: var(--text);
      font-size: 15px;
    }

    button {
      padding: 14px 22px;
      border-radius: 8px;
      border: none;
      background: var(--blue);
      color: white;
      font-weight: 600;
      cursor: pointer;
    }

    button:disabled {
      opacity: 0.6;
      cursor: default;
    }

    /* LAYOUT */
    .top {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 28px;
      margin-bottom: 28px;
    }

    .panel {
      background: linear-gradient(180deg, #0f1833, var(--panel));
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 20px;
    }

    /* QUADRANT */
    .quadrant {
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: 1fr 1fr;
      gap: 10px;
      position: relative;
      height: 360px;
    }

    .quad {
      border: 1px dashed var(--border);
      border-radius: 10px;
      padding: 10px;
      font-size: 13px;
      color: var(--muted);
    }

    .quad.active {
      border-color: var(--blue);
      color: var(--text);
      background: rgba(79,124,255,0.08);
    }

    .quad-title {
      font-weight: 600;
      margin-bottom: 4px;
      font-size: 14px;
    }

    .center-score {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: radial-gradient(circle at top, #14204a, #0b1224);
      border: 2px solid var(--blue);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
    }

    .score {
      font-size: 34px;
      font-weight: 700;
    }

    .score-label {
      font-size: 12px;
      color: var(--muted);
    }

    /* STRATEGY */
    .strategy h3 {
      margin: 0 0 12px 0;
      font-size: 16px;
    }

    .pros, .cons {
      margin-bottom: 14px;
    }

    ul {
      padding-left: 18px;
      margin: 6px 0;
    }

    li {
      margin-bottom: 6px;
      font-size: 14px;
    }

    /* LOWER */
    .lower {
      display: grid;
      grid-template-columns: 1fr;
      gap: 18px;
    }

    details {
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 14px 18px;
      background: var(--panel);
    }

    summary {
      cursor: pointer;
      font-weight: 600;
      font-size: 14px;
    }

    pre {
      margin-top: 14px;
      background: #050914;
      border-radius: 8px;
      padding: 14px;
      overflow-x: auto;
      font-size: 12px;
      color: #cfd6ff;
    }

    .muted { color: var(--muted); }
  </style>
</head>

<body>
<div class="container">

  <h1>EEI Internal Audit</h1>

  <div class="input-row">
    <input id="urlInput" placeholder="example.com" />
    <button id="runBtn">Run Audit</button>
  </div>

  <div id="result" style="display:none">

    <div class="top">

      <!-- QUADRANT -->
      <div class="panel">
        <div class="quadrant" id="quadrant">
          <div class="quad" data-q="AI-First Leader">
            <div class="quad-title">üöÄ AI-First Leader</div>
            High Capability ¬∑ High Intent
          </div>
          <div class="quad" data-q="Sovereign / Defensive Power">
            <div class="quad-title">üè∞ Sovereign / Defensive Power</div>
            High Capability ¬∑ Low Intent
          </div>
          <div class="quad" data-q="Aspirational Challenger">
            <div class="quad-title">üå± Aspirational Challenger</div>
            Medium Capability ¬∑ High Intent
          </div>
          <div class="quad" data-q="Cautious Optimizer">
            <div class="quad-title">‚öñÔ∏è Cautious Optimizer</div>
            Medium Capability ¬∑ Medium Intent
          </div>

          <div class="center-score">
            <div class="score" id="score">‚Äî</div>
            <div class="score-label">Capability</div>
          </div>
        </div>
      </div>

      <!-- STRATEGY -->
      <div class="panel strategy">
        <h3>Strategy ‚Äî Pros / Cons</h3>

        <div class="pros">
          <strong>Pros</strong>
          <ul id="pros"></ul>
        </div>

        <div class="cons">
          <strong>Cons</strong>
          <ul id="cons"></ul>
        </div>

        <div class="muted" id="posture"></div>
      </div>

    </div>

    <div class="lower">

      <div class="panel">
        <strong>AI Intent Signals (Observed)</strong>
        <ul id="intentSignals" class="muted"></ul>
      </div>

      <details>
        <summary>View Evidence</summary>
        <pre id="breakdown"></pre>
      </details>

      <details>
        <summary>Raw JSON (Internal)</summary>
        <pre id="raw"></pre>
      </details>

    </div>

  </div>

</div>

<script>
const STRATEGY = {
  "üöÄ AI-First Leader": {
    pros: [
      "Compounds authority in AI-native discovery",
      "Sets default framing for category",
      "Hard to displace once entrenched"
    ],
    cons: [
      "Higher scrutiny and expectations",
      "Execution mistakes are amplified"
    ]
  },
  "üè∞ Sovereign / Defensive Power": {
    pros: [
      "Strong structural control and brand gravity",
      "Resilient to short-term platform shifts"
    ],
    cons: [
      "AI-native competitors can flank",
      "Leaves discovery upside unclaimed"
    ]
  },
  "üå± Aspirational Challenger": {
    pros: [
      "Momentum and narrative tailwinds",
      "Can outlearn incumbents"
    ],
    cons: [
      "Structural weaknesses still visible",
      "Easy to outrun but hard to defend"
    ]
  },
  "‚öñÔ∏è Cautious Optimizer": {
    pros: [
      "Balanced risk posture",
      "Incremental gains without exposure"
    ],
    cons: [
      "Rarely defines the category",
      "Vulnerable to decisive moves by others"
    ]
  }
};

const runBtn = document.getElementById("runBtn");
const input = document.getElementById("urlInput");

runBtn.onclick = async () => {
  runBtn.disabled = true;
  runBtn.textContent = "Running‚Ä¶";

  const url = input.value.trim();
  const res = await fetch(`/api/audit?url=${encodeURIComponent(url)}`);
  const data = await res.json();

  document.getElementById("result").style.display = "block";
  document.getElementById("score").textContent = data.ecc.score;

  document.querySelectorAll(".quad").forEach(q => q.classList.remove("active"));
  document.querySelector(`[data-q="${data.quadrant.replace("üöÄ ","").replace("üè∞ ","").replace("üå± ","").replace("‚öñÔ∏è ","")}"]`)?.classList.add("active");

  const strat = STRATEGY[data.quadrant] || { pros: [], cons: [] };
  document.getElementById("pros").innerHTML = strat.pros.map(p => `<li>${p}</li>`).join("");
  document.getElementById("cons").innerHTML = strat.cons.map(c => `<li>${c}</li>`).join("");

  document.getElementById("posture").textContent =
    `Capability: ${data.ecc.band.toUpperCase()} ¬∑ Intent: ${data.intent.posture.toUpperCase()}`;

  document.getElementById("intentSignals").innerHTML =
    data.intent.signals.length
      ? data.intent.signals.map(s => `<li>${s}</li>`).join("")
      : "<li>No explicit AI-forward signals observed.</li>";

  document.getElementById("breakdown").textContent =
    JSON.stringify(data.breakdown, null, 2);

  document.getElementById("raw").textContent =
    JSON.stringify(data, null, 2);

  runBtn.disabled = false;
  runBtn.textContent = "Run Audit";
};
</script>
</body>
</html>
